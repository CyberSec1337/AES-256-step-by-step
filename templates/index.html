<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AES-256 Encryption/Decryption</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <h1>AES-256 Web Tool | ุฃุฏุงุฉ ุงูุชุดููุฑ AES-256</h1>
    
    <!-- Language Toggle -->
    <div class="language-toggle">
        <button id="lang-en" class="lang-btn active">English</button>
        <button id="lang-ar" class="lang-btn">ุงูุนุฑุจูุฉ</button>
    </div>
    
    <!-- English Instructions -->
    <div class="info-box" id="instructions-en">
        <h3>Instructions:</h3>
        <ul>
            <li><strong>โ๏ธ IMPORTANT:</strong> Text input must be at least <strong>16 bytes</strong> long (minimum one AES block)</li>
            <li><strong>Encryption:</strong> Enter at least 16 bytes of plaintext, a 32-character key, select mode, and click Encrypt</li>
            <li><strong>Decryption:</strong> Enter Base64 ciphertext, the same 32-character key used for encryption, select the same mode, and click Decrypt</li>
            <li><strong>ECB Mode:</strong> No IV required (โ๏ธ less secure, for educational purposes)</li>
            <li><strong>CBC/CFB/OFB/CTR Modes:</strong> Require a 16-character IV/Nonce (more secure)</li>
            <li><strong>Example Inputs:</strong> "Hello World!!!!!" (16 bytes), "This is a longer message for AES encryption" (43 bytes), "ูุฑุญุจุง ุจุงูุนุงูู" (Arabic text)</li>
            <li><strong>Automatic Padding:</strong> PKCS7 padding is automatically applied for block modes when needed</li>
        </ul>
    </div>
    
    <!-- Arabic Instructions -->
    <div class="info-box" id="instructions-ar" style="display:none;" dir="rtl">
        <h3>ุงูุชุนูููุงุช:</h3>
        <ul>
            <li><strong>โ๏ธ ููู ุฌุฏุงู:</strong> ูุฌุจ ุฃู ูููู ุงููุต ุงููุฏุฎู <strong>16 ุจุงูุช ุนูู ุงูุฃูู</strong> (ูุญุฏ ุฃุฏูู ูุชูุฉ AES ูุงุญุฏุฉ)</li>
            <li><strong>ุงูุชุดููุฑ:</strong> ุฃุฏุฎู 16 ุจุงูุช ุนูู ุงูุฃูู ูู ุงููุต ุงูุฃุตููุ ููุชุงุญ ูู 32 ุญุฑูุ ุงุฎุชุฑ ุงูููุทุ ูุงุถุบุท ุชุดููุฑ</li>
            <li><strong>ูู ุงูุชุดููุฑ:</strong> ุฃุฏุฎู ุงููุต ุงููุดูุฑ ุจุตูุบุฉ Base64ุ ููุณ ุงูููุชุงุญ ุงููุณุชุฎุฏู ูู ุงูุชุดููุฑุ ููุณ ุงูููุทุ ูุงุถุบุท ูู ุงูุชุดููุฑ</li>
            <li><strong>ููุท ECB:</strong> ูุง ูุญุชุงุฌ IV (โ๏ธ ุฃูู ุฃูุงูุงูุ ููุฃุบุฑุงุถ ุงูุชุนููููุฉ ููุท)</li>
            <li><strong>ุฃููุงุท CBC/CFB/OFB/CTR:</strong> ุชุญุชุงุฌ IV/Nonce ูู 16 ุญุฑู (ุฃูุซุฑ ุฃูุงูุงู)</li>
            <li><strong>ุฃูุซูุฉ ูููุฏุฎูุงุช:</strong> "ูุฑุญุจุง ุจุงูุนุงูู!!!" (16 ุจุงูุช)ุ "ูุฐู ุฑุณุงูุฉ ุฃุทูู ูุชุดููุฑ AES" (ูุต ุฃุทูู)ุ "Hello World!!!!!" (16 ุจุงูุช ุฅูุฌููุฒู)</li>
            <li><strong>ุญุดู ุชููุงุฆู:</strong> ูุชู ุชุทุจูู ุญุดู PKCS7 ุชููุงุฆูุงู ููุฃููุงุท ุงููุชููุฉ ุนูุฏ ุงูุญุงุฌุฉ</li>
        </ul>
    </div>
    
    <form id="aes-form">
        <!-- Text Input with Language Labels -->
        <div id="text-label-en">
            <label>Text (Minimum 16 bytes - Plaintext for encryption or Base64 ciphertext for decryption):</label>
        </div>
        <div id="text-label-ar" style="display:none;" dir="rtl">
            <label>ุงููุต (16 ุจุงูุช ูุญุฏ ุฃุฏูู - ุงููุต ุงูุฃุตูู ููุชุดููุฑ ุฃู ุงููุต ุงููุดูุฑ ุจุตูุบุฉ Base64 ููู ุงูุชุดููุฑ):</label>
        </div>
        <textarea name="text" rows="4" cols="50" required maxlength="200" id="text-input"></textarea><br>
        <small id="text-counter-en">Current length: <span id="text-length">0</span> bytes (minimum 16) | Characters: <span id="text-chars">0</span></small>
        <small id="text-counter-ar" style="display:none;" dir="rtl">ุงูุทูู ุงูุญุงูู: <span id="text-length-ar">0</span> ุจุงูุช (ุงูุญุฏ ุงูุฃุฏูู 16) | ุงูุฃุญุฑู: <span id="text-chars-ar">0</span></small><br><br>

        <!-- Key Input with Language Labels -->
        <div id="key-label-en">
            <label>Key (exactly 32 characters = 256-bit):</label>
        </div>
        <div id="key-label-ar" style="display:none;" dir="rtl">
            <label>ุงูููุชุงุญ (32 ุญุฑู ุจุงูุถุจุท = 256-ุจุช):</label>
        </div>
        <input type="text" name="key" maxlength="32" required id="key-input"><br>
        <small id="key-counter-en">Current length: <span id="key-length">0</span>/32</small>
        <small id="key-counter-ar" style="display:none;" dir="rtl">ุงูุทูู ุงูุญุงูู: <span id="key-length-ar">0</span>/32</small><br><br>

        <!-- Mode Selection with Language Labels -->
        <div id="mode-label-en">
            <label>Mode:</label>
        </div>
        <div id="mode-label-ar" style="display:none;" dir="rtl">
            <label>ุงูููุท:</label>
        </div>
        <select name="mode" id="mode-select">
            <option value="ECB" data-en="ECB (Electronic Codebook)" data-ar="ECB (ุงููุชุงุจ ุงูุฑูุฒู ุงูุฅููุชุฑููู)">ECB</option>
            <option value="CBC" data-en="CBC (Cipher Block Chaining)" data-ar="CBC (ุชุณูุณู ูุชู ุงูุชุดููุฑ)">CBC</option>
            <option value="CFB" data-en="CFB (Cipher Feedback)" data-ar="CFB (ุชุบุฐูุฉ ุฑุงุฌุนุฉ ููุชุดููุฑ)">CFB</option>
            <option value="OFB" data-en="OFB (Output Feedback)" data-ar="OFB (ุชุบุฐูุฉ ุฑุงุฌุนุฉ ูููุฎุฑุฌุงุช)">OFB</option>
            <option value="CTR" data-en="CTR (Counter Mode)" data-ar="CTR (ููุท ุงูุนุฏุงุฏ)">CTR</option>
        </select><br><br>

        <!-- IV Section with Language Labels -->
        <div id="iv-section" style="display:none;">
            <div id="iv-label-en">
                <label id="iv-label">IV/Nonce (exactly 16 characters):</label>
            </div>
            <div id="iv-label-ar" style="display:none;" dir="rtl">
                <label>IV/Nonce (16 ุญุฑู ุจุงูุถุจุท):</label>
            </div>
            <input type="text" name="iv" maxlength="16" id="iv-input"><br>
            <small id="iv-counter-en">Current length: <span id="iv-length">0</span>/16</small>
            <small id="iv-counter-ar" style="display:none;" dir="rtl">ุงูุทูู ุงูุญุงูู: <span id="iv-length-ar">0</span>/16</small><br><br>
        </div>

        <!-- Buttons with Language Labels -->
        <div id="buttons-en">
            <button type="submit" name="action" value="encrypt">๐ Encrypt</button>
            <button type="submit" name="action" value="decrypt">๐ Decrypt</button>
        </div>
        <div id="buttons-ar" style="display:none;" dir="rtl">
            <button type="submit" name="action" value="encrypt">๐ ุชุดููุฑ</button>
            <button type="submit" name="action" value="decrypt">๐ ูู ุงูุชุดููุฑ</button>
        </div>
    </form>

    <div id="result"></div>
    
    <!-- View Toggle Buttons -->
    <div id="view-controls" style="display:none;">
        <div class="view-toggle" id="view-toggle-en">
            <button id="flowchart-btn" class="toggle-btn active">๐ Flowchart View</button>
            <button id="steps-btn" class="toggle-btn">๐ Steps View</button>
        </div>
        <div class="view-toggle" id="view-toggle-ar" style="display:none;" dir="rtl">
            <button id="flowchart-btn-ar" class="toggle-btn active">๐ ุนุฑุถ ุงููุฎุทุท ุงูุชุฏููู</button>
            <button id="steps-btn-ar" class="toggle-btn">๐ ุนุฑุถ ุงูุฎุทูุงุช</button>
        </div>
    </div>
    
    <!-- Flowchart Container -->
    <div id="flowchart-container" style="display:none;">
        <h2 id="flowchart-title-en">AES Process Flowchart</h2>
        <h2 id="flowchart-title-ar" style="display:none;" dir="rtl">ูุฎุทุท ุชุฏูู ุนูููุฉ AES</h2>
        
        <div id="flowchart">
            <!-- Input Stage -->
            <div class="flow-stage" id="stage-input">
                <div class="stage-header" id="stage-input-header-en">๐ Input Stage</div>
                <div class="stage-header" id="stage-input-header-ar" style="display:none;" dir="rtl">๐ ูุฑุญูุฉ ุงูุฅุฏุฎุงู</div>
                <div class="stage-content">
                    <div class="flow-box input-box">
                        <div class="box-title" id="input-box-title-en">Plaintext/Ciphertext</div>
                        <div class="box-title" id="input-box-title-ar" style="display:none;" dir="rtl">ุงููุต ุงูุฃุตูู/ุงููุดูุฑ</div>
                        <div class="box-content" id="input-text">-</div>
                    </div>
                    <div class="flow-arrow">โ</div>
                </div>
            </div>

            <!-- Key Preparation Stage -->
            <div class="flow-stage" id="stage-key">
                <div class="stage-header" id="stage-key-header-en">๐ Key Preparation</div>
                <div class="stage-header" id="stage-key-header-ar" style="display:none;" dir="rtl">๐ ุชุญุถูุฑ ุงูููุชุงุญ</div>
                <div class="stage-content">
                    <div class="flow-box key-box">
                        <div class="box-title" id="key-box-title-en">256-bit Key</div>
                        <div class="box-title" id="key-box-title-ar" style="display:none;" dir="rtl">ููุชุงุญ 256-ุจุช</div>
                        <div class="box-content" id="key-display">-</div>
                    </div>
                    <div class="flow-arrow">โ</div>
                </div>
            </div>

            <!-- Mode Setup Stage -->
            <div class="flow-stage" id="stage-mode">
                <div class="stage-header" id="stage-mode-header-en">โ๏ธ Mode Setup</div>
                <div class="stage-header" id="stage-mode-header-ar" style="display:none;" dir="rtl">โ๏ธ ุฅุนุฏุงุฏ ุงูููุท</div>
                <div class="stage-content">
                    <div class="flow-row">
                        <div class="flow-box mode-box">
                            <div class="box-title" id="mode-box-title-en">Encryption Mode</div>
                            <div class="box-title" id="mode-box-title-ar" style="display:none;" dir="rtl">ููุท ุงูุชุดููุฑ</div>
                            <div class="box-content" id="mode-display">-</div>
                        </div>
                        <div class="flow-box iv-box" id="iv-display-box" style="display:none;">
                            <div class="box-title" id="iv-box-title-en">Initialization Vector</div>
                            <div class="box-title" id="iv-box-title-ar" style="display:none;" dir="rtl">ูุชุฌู ุงูุชููุฆุฉ</div>
                            <div class="box-content" id="iv-display">-</div>
                        </div>
                    </div>
                    <div class="flow-arrow">โ</div>
                </div>
            </div>

            <!-- Processing Stage -->
            <div class="flow-stage" id="stage-processing">
                <div class="stage-header" id="stage-processing-header-en">๐ AES Processing</div>
                <div class="stage-header" id="stage-processing-header-ar" style="display:none;" dir="rtl">๐ ูุนุงูุฌุฉ AES</div>
                <div class="stage-content">
                    <div id="blocks-container">
                        <!-- Dynamic blocks will be added here -->
                    </div>
                    <div class="flow-arrow">โ</div>
                </div>
            </div>

            <!-- Output Stage -->
            <div class="flow-stage" id="stage-output">
                <div class="stage-header" id="stage-output-header-en">๐ค Output Stage</div>
                <div class="stage-header" id="stage-output-header-ar" style="display:none;" dir="rtl">๐ค ูุฑุญูุฉ ุงูุฅุฎุฑุงุฌ</div>
                <div class="stage-content">
                    <div class="flow-box output-box">
                        <div class="box-title" id="output-box-title-en">Final Result</div>
                        <div class="box-title" id="output-box-title-ar" style="display:none;" dir="rtl">ุงููุชูุฌุฉ ุงูููุงุฆูุฉ</div>
                        <div class="box-content" id="output-text">-</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="animation"></div>
    <a id="download-link" href="/download" style="display:none">
        <span id="download-text-en">Download Xmind File</span>
        <span id="download-text-ar" style="display:none;">ุชุญููู ููู Xmind</span>
    </a>

    <script src="/static/aes.js"></script>
</body>
</html>
